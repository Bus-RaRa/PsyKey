<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>PsyKey | MBTI & Enneagram</title>

    <script src="https://kit.fontawesome.com/b3ce117555.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" type="text/css" href="site/result.css">
</head>
<body>
    <header>
        <div class="top-container">
            <div class="brand">
                <img src="logo.png" alt="PsyKey Logo" class="logo">
                <h2 class="site-title">PSYKEY</h2>
            </div>
            <nav class="main-nav">
                <a href="index.html">Ana Sayfa</a>
    <ul class="demo-dropdown">
        <li class="dropdown-item">
            <a href="ennegram.html">Enneagram <i class="fa-solid fa-angle-down arr-down"></i></a>
            
            <ul class="ennea-menu">
                <li class="ennea-group">
                    <h3>Duygu Tipleri</h3>
                    <p>Ä°liÅŸki ve yakÄ±nlÄ±k odaklÄ± tipler.</p>

                    <div class="ennea-types">
                        <a href="types/type2.html" class="ennea-pill ennea-pink">
                            <span class="ennea-name">Tip 2</span>
                            <span class="ennea-code">YardÄ±mcÄ±</span>
                        </a>
                        <a href="types/type3.html" class="ennea-pill ennea-pink">
                            <span class="ennea-name">Tip 3</span>
                            <span class="ennea-code">BaÅŸarÄ±lÄ±</span>
                        </a>
                        <a href="types/type4.html" class="ennea-pill ennea-pink">
                            <span class="ennea-name">Tip 4</span>
                            <span class="ennea-code">Ã–zgÃ¼n</span>
                        </a>
                    </div>
                </li>

                <li class="ennea-group">
                    <h3>Kafa Tipleri</h3>
                    <p>GÃ¼venlik ve zihinsel analiz odaklÄ± tipler.</p>

                    <div class="ennea-types">
                        <a href="types/type5.html" class="ennea-pill ennea-blue">
                            <span class="ennea-name">Tip 5</span>
                            <span class="ennea-code">AraÅŸtÄ±rmacÄ±</span>
                        </a>
                        <a href="types/type6.html" class="ennea-pill ennea-blue">
                            <span class="ennea-name">Tip 6</span>
                            <span class="ennea-code">SadÄ±k</span>
                        </a>
                        <a href="types/type7.html" class="ennea-pill ennea-blue">
                            <span class="ennea-name">Tip 7</span>
                            <span class="ennea-code">Hevesli</span>
                        </a>
                    </div>
                </li>

                <li class="ennea-group">
                    <h3>Beden Tipleri</h3>
                    <p>Kontrol, gÃ¼Ã§ ve sezgisel tepki odaklÄ± tipler.</p>

                    <div class="ennea-types">
                        <a href="types/type8.html" class="ennea-pill ennea-gold">
                            <span class="ennea-name">Tip 8</span>
                            <span class="ennea-code">MÃ¼cadeleci</span>
                        </a>
                        <a href="types/type9.html" class="ennea-pill ennea-gold">
                            <span class="ennea-name">Tip 9</span>
                            <span class="ennea-code">BarÄ±ÅŸÃ§Ä±l</span>
                        </a>
                        <a href="types/type1.html" class="ennea-pill ennea-gold">
                            <span class="ennea-name">Tip 1</span>
                            <span class="ennea-code">Reformcu</span>
                        </a>
                    </div>
                </li>
            </ul>
        </li>
    </ul>
                <a href="tests.html">Testler</a>
                <a href="contact.html">Ä°letiÅŸim</a>
            </nav>

        </div>
    </header>
<main class="results">
  <div class="results-top">
    <div>
      <h1>SonuÃ§larÄ±n</h1>
      <p class="results-sub">SonuÃ§larÄ±nÄ± incele, ennegram tipini ve tritypeâ€™Ä±nÄ± gÃ¶r.</p>
    </div>
  </div>

  <section class="results-grid">

    <article class="card profile-card">
      <div class="card-head">
        <h2 class="card-title">EnneagramÄ±n</h2>
      </div>

      <div class="profile-body">
        <div class="avatar-box">

          <div class="avatar-placeholder">
            <p id="placeholder"></p>
          </div>
        </div>

        <h3 class="big-type" id="mainTypeText">â€”</h3>
        <p class="muted" id="mainTypeDesc">â€”</p>

        <a class="learn-link" id="learnMore" href="types/type1.html">Daha FazlasÄ± â†’</a>
      </div>
    </article>

    <article class="card traits-card">
      <div class="card-head">
        <h2 class="card-title">SkorlarÄ±n</h2>
      </div>


      <div class="trait-list" id="traitList"></div>
    </article>


    <article class="card summary-card">
      <div class="card-head">
        <h2 class="card-title">Ã–zet</h2>
      </div>

      <div class="summary-body">
        <p class="muted">Enneagram tipin:</p>
        <p class="big-number" id="dominantType">0</p>

        <p class="muted">Tritype'Ä±n:</p>
        <p class="big-number" id="dominantTri">000</p>

        <div class="divider"></div>


      </div>
    </article>
  </section>

  <section class="share-card">
    <div>
      <h2 class="card-title">SonuÃ§larÄ±nÄ± PaylaÅŸ</h2>
      <p class="muted">Linkini kopyalayÄ±p paylaÅŸabilirsin.</p>
    </div>

    <div class="share-row">
      <input class="share-input" id="shareUrl" value="https://psykey.example/results" readonly>
      <button class="primary-btn" type="button" id="copyBtn">Kopyala</button>
    </div>
  </section>
  <br>
  <br>
    <a href="tests.html" class="continue" id="restart">Testi Yeniden BaÅŸlat </a>
</main>
    <footer>
        HaklarÄ± SaklÄ±dÄ±r!
    </footer>
<script>

  const p1 = Number(localStorage.getItem("test_page_1") || 0);
  const p2 = Number(localStorage.getItem("test_page_2") || 0);
  const p3 = Number(localStorage.getItem("test_page_3") || 0);
  const p4 = Number(localStorage.getItem("test_page_4") || 0);
  const p5 = Number(localStorage.getItem("test_page_5") || 0);
  const p6 = Number(localStorage.getItem("test_page_6") || 0);
  const p7 = Number(localStorage.getItem("test_page_7") || 0);
  const p8 = Number(localStorage.getItem("test_page_8") || 0);
  const p9 = Number(localStorage.getItem("test_page_9") || 0);

const scores = [p1,p2,p3,p4,p5,p6,p7,p8,p9];


let bestIndex = 0;
for (let i = 1; i < scores.length; i++) {
  if (scores[i] > scores[bestIndex]) bestIndex = i;
}


const enneagramType = bestIndex + 1;
const gut = [8,9,1];
const heart = [2,3,4];
const head = [5,6,7];

function bestTypeOf(group) {
  let best = group[0];
  for (const t of group) {
    if (scores[t-1] > scores[best-1]) best = t;
  }
  return best;
}

const tGut = bestTypeOf(gut);
const tHeart = bestTypeOf(heart);
const tHead = bestTypeOf(head);

const typee = [tGut, tHeart, tHead];

typee.sort((a, b) => scores[b-1] - scores[a-1]);

const w = typee[0];
const y = typee[1];
const z = typee[2];
const tritype = `${w}${y}${z}`;


const typeNames = {
  1:"Reformcu", 2:"YardÄ±mcÄ±", 3:"BaÅŸarÄ±lÄ±", 4:"Ã–zgÃ¼n",
  5:"AraÅŸtÄ±rmacÄ±", 6:"SadÄ±k", 7:"Hevesli", 8:"MÃ¼cadeleci", 9:"BarÄ±ÅŸÃ§Ä±l"
};
const typeExp = {
    1:"Rasyonel, idealist tip: Ä°lkeli, amaÃ§lÄ±, Ã¶z denetimli ve mÃ¼kemmeliyetÃ§i.",
    2:"Åefkatli, kiÅŸilerarasÄ± tip: GÃ¶steriÅŸli, cÃ¶mert, memnun edici ve sahiplenici.",
    3:"BaÅŸarÄ± odaklÄ±, pragmatik tip: Uyumlu, hÄ±rslÄ±, verimli ve imaj odaklÄ±.",
    4:"Hassas, iÃ§e dÃ¶nÃ¼k tip: Duygusal, dramatik, bireysel ve deÄŸiÅŸken.",
    5:"YoÄŸun, zihinsel tip: GÃ¶zlemci, yenilikÃ§i, mesafeli ve baÄŸÄ±msÄ±z.",
    6:"BaÄŸlÄ±, gÃ¼ven odaklÄ± tip: Sorumlu, ÅŸÃ¼pheci, hazÄ±rlÄ±klÄ± ve endiÅŸeli.",
    7:"MeÅŸgul, eÄŸlence odaklÄ± tip: Spontane, Ã§ok yÃ¶nlÃ¼, daÄŸÄ±nÄ±k ve dikkatsiz.",
    8:"GÃ¼Ã§lÃ¼, baskÄ±n tip: Ã–zgÃ¼venli, kararlÄ±, korumacÄ± ve Ã§atÄ±ÅŸmacÄ±.",
    9:"Rahat, uyumlu tip: DuyarlÄ±, gÃ¼ven verici, uyum saÄŸlayan ve pasif-agresif olabilen."
}
const typeemoji = {
    1:"ğŸ§­",
    2:"ğŸ¤",
    3:"ğŸ†",
    4:"ğŸ¨",
    5:"ğŸ§ ",
    6:"ğŸ›¡ï¸",
    7:"ğŸˆ",
    8:"ğŸ¦",
    9:"ğŸ•Šï¸"
}

document.getElementById("dominantType").textContent = enneagramType;
document.getElementById("dominantTri").textContent = tritype;


const mainTypeText = document.getElementById("mainTypeText");
const mainTypeDesc = document.getElementById("mainTypeDesc");
const learnMore = document.getElementById("learnMore");
const placeholder = document.getElementById("placeholder");

mainTypeText.textContent = `${typeNames[enneagramType]} (Tip ${enneagramType})`;
mainTypeDesc.textContent = `${typeExp[enneagramType]}`;
placeholder.textContent = `${typeemoji[enneagramType]}`;
learnMore.href = `types/type${enneagramType}.html`;


const traitList = document.getElementById("traitList");
const maxScore = Math.max(...scores, 1);

traitList.innerHTML = ""; 
for (let t = 1; t <= 9; t++){
  const val = scores[t-1];
  
  let w = (val / maxScore) * 100;
  if (w<0)
  {
    w = 0;
  }

  const row = document.createElement("div");
  row.className = "trait";
  row.innerHTML = `
    <div class="trait-top">
      <div class="trait-name">Tip ${t} Â· ${typeNames[t]}</div>
      <div class="trait-val">${val}</div>
    </div>
    <div class="bar" style="--w:${w.toFixed(1)}%"></div>
  `;
  traitList.appendChild(row);
}


const copy = (text) => navigator.clipboard?.writeText(text);

const shareUrlEl = document.getElementById("shareUrl");
shareUrlEl.value = window.location.href;

document.getElementById("copyBtn")?.addEventListener("click", () => copy(shareUrlEl.value));
document.getElementById("copyLink")?.addEventListener("click", () => copy(shareUrlEl.value));



    document.getElementById("restart").addEventListener("click", () => {
    localStorage.removeItem("test_page_1");
    localStorage.removeItem("test_page_2");
    localStorage.removeItem("test_page_3");
    localStorage.removeItem("test_page_4");
    localStorage.removeItem("test_page_5");
    localStorage.removeItem("test_page_6");
    localStorage.removeItem("test_page_7");
    localStorage.removeItem("test_page_8");
    localStorage.removeItem("test_page_9");
    });
</script>
</body>

</html>

